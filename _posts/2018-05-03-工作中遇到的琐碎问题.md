--
layout:     post
title:      工作中遇到的知识点
subtitle:   持续更新..
date:       2018-04-19
author:     ARYAO
header-img: img/post/post-bg-qa.jpg
catalog: true
tags:
    - 前端
    - 琐碎知识点
---


## Request URL中的'+'，会被服务端解析为空格

**1.**  **请求参数包含空格时**

![](https://i.imgur.com/MddfFFO.png)

- 当发请求时候，如果参数中间有空格，URLEncoder.encode方法会把空格变成加号（+），所以如图所示，URL中会出现加号。

- 服务端人员会把URL中对应的（+）转义为空格。所以针对上图的情况，前端不需要再做多余的转换处理。

**2.** **请求参数包含加号时**

如上所述，服务端会把URL中的加号转义为空格；所以当请求参数包含加号时，需要前端做特殊处理。

解决方法：把参数中的加号（+）全部替换为“%20”。

`str.replace(/\+/g, '%20') `

## then中执行函数
> 1. `A().then(B())`
> 
> 2. `A().then(B)`

A、B均为函数。

如果采用第一种写法（即B函数有括号），那么B函数是在声明then的时候就立即执行了；可以理解为和没then是一样的效果，只是顺序执行下来了而已，效果等同于 `A() B()`

如果采用第二种写法（即B函数没有括号），那么如果A执行失败，B则无法执行。